/**
 * JSV: JSON Schema Validator
 * 
 * @fileOverview A JavaScript implementation of a extendable, fully compliant JSON Schema validator.
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @version 4.0.2
 * @see http://github.com/garycourt/JSV
 */

/*
 * Copyright 2010 Gary Court. All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 * 
 *    1. Redistributions of source code must retain the above copyright notice, this list of
 *       conditions and the following disclaimer.
 * 
 *    2. Redistributions in binary form must reproduce the above copyright notice, this list
 *       of conditions and the following disclaimer in the documentation and/or other materials
 *       provided with the distribution.
 * 
 * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of Gary Court or the JSON Schema specification.
 */

var exports=exports||this,require=require||function(){return exports};
(function(){function t(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function wa(){}function K(a){wa.prototype=a||{};return new wa}function $(a,b,c){var d={},e;for(e in a)a[e]!==z[e]&&(d[e]=b.call(c,a[e],e,a));return d}function xa(a){var b=[],c;switch(t(a)){case "object":for(c in a)a[c]!==z[c]&&(b[b.length]=c);break;case "array":for(c=a.length-1;0<=c;--c)b[c]=c}return b}function S(){return[m[Math.floor(16*Math.random())],
m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],"-",m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],"-4",m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],"-",m[Math.floor(16*Math.random())&3|8],m[Math.floor(16*
Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],"-",m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())],m[Math.floor(16*Math.random())]].join("")}function A(a){return encodeURIComponent(a).replace(/!/g,
"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function B(a){"string"===typeof a&&-1===a.indexOf("#")&&(a+="#");return a}function aa(a){if(a instanceof n)return a.getURI();switch(t(a)){case "undefined":case "null":case "boolean":case "number":case "string":return a;case "object":return $(a,aa);case "array":return L(a,aa);default:return a.toString()}}function C(a,b,c,d,e){Error.call(this,d);this.uri=a instanceof n?a.getURI():a;this.schemaUri=b instanceof n?
b.getURI():b;this.attribute=c;this.description=this.message=d;this.details=e}function F(){this.errors=[];this.validated={}}function n(a,b,c,d){b instanceof n&&("string"!==typeof d&&(d=b._fd),"string"!==typeof c&&(c=b._uri),b=b._value);"string"!==typeof c?c="urn:uuid:"+S()+"#":-1===c.indexOf(":")&&(c=B(ya.resolve("urn:uuid:"+S()+"#",c)));this._env=a;this._value=b;this._uri=c;this._fd=d||this._env._options.defaultFragmentDelimiter}function y(a,b){var c,d;a instanceof n&&(a=a.getValue());switch(t(a)){case "object":if(b){c=
{};for(d in a)a[d]!==z[d]&&(c[d]=y(a[d],b));return c}return K(a);case "array":if(b){c=Array(a.length);for(d=a.length;0<=--d;)c[d]=y(a[d],b);return c}return Array.prototype.slice.call(a);default:return a}}function o(a,b,c,d){n.call(this,a,b,c);this._schema=!0===d?this:b instanceof o&&!(d instanceof o)?b._schema:d instanceof o?d:this._env.getDefaultSchema()||this._env.createEmptySchema();a=this._schema.getValueOfProperty("fragmentResolution");"dot-delimited"===a?this._fd=".":"slash-delimited"===a&&
(this._fd="/");return this.rebuild()}function Ya(a){return function(){for(var b=this,c=[],d=b._refs&&b._refs.full,e;d;)if(e=b._env.findSchema(d)){if(e._value===b._value)break;b=e;c.push(d);d=b._refs&&b._refs.full;if(-1<c.indexOf(d))break}else{if(b._env._options.enforceReferences)throw new C(b,b._schema,"{full}","Unknown schema reference",d);d=null}return a.apply(b,arguments)}}function za(a,b,c){var d=t(a),e=t(b),f;if("undefined"===e)return y(a,!0);if("undefined"===d||e!==d)return y(b,!0);if("object"===
e){a instanceof o&&(a=a.getAttributes());b instanceof o&&(b=b.getAttributes(),b["extends"]&&(c&&b["extends"]instanceof o)&&(b["extends"]=[b["extends"]]));d=y(a,!0);for(f in b)b[f]!==z[f]&&(d[f]=za(a[f],b[f],c));return d}return y(b,!0)}function q(){this._id=S();this._schemas={};this._options={};this.createSchema({},!0,"urn:jsv:empty-schema#")}var p=function(a){for(var b=arguments[0],c=1,d=arguments[c];d;)b=b.slice(0,-1)+d.slice(1),d=arguments[++c];return b},g=function(a){return"(?:"+a+")"},T=p("[0-9]",
"[A-Fa-f]"),M=g("%"+T+T),Za=p("[\\:\\/\\?\\#\\[\\]\\@]","[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),s=p("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]"),ba=g("[A-Za-z]"+p("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),N=g(g(M+"|"+p(s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:]"))+"*"),U=g(g("25[0-5]")+"|"+g("2[0-4][0-9]")+"|"+g("1[0-9][0-9]")+"|"+g("[1-9][0-9]")+"|[0-9]"),Aa=g(U+"\\."+U+"\\."+U+"\\."+U),Ba=g(T+"{1,4}");g(g(Ba+"\\:"+Ba)+"|"+Aa);var $a=g(p(s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:]")+"+"),ab=g("v"+T+"+\\."+
p(s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:]")+"+"),bb=g("\\["+g($a+"|"+ab)+"\\]"),cb=g(g(M+"|"+p(s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"))+"*"),V=g(bb+"|"+Aa+"|"+cb),O=g("[0-9]*"),Ca=g(g(N+"@")+"?"+V+g("\\:"+O)+"?"),W=g(M+"|"+p(s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@]")),db=g(W+"*"),Da=g(W+"+"),eb=g(g(M+"|"+p(s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\@]"))+"+"),u=g(g("\\/"+db)+"*"),G=g("\\/"+g(Da+u)+"?"),ca=g(eb+u),X=g(Da+u),H=g("");g(u+"|"+G+"|"+ca+"|"+X+"|"+H);var I=g(g(W+"|[\\/\\?]")+
"*"),P=g(g(W+"|[\\/\\?]")+"*"),Ea=g(g("\\/\\/"+Ca+u)+"|"+G+"|"+X+"|"+H),Fa=g(ba+"\\:"+Ea+g("\\?"+I)+"?"+g("\\#"+P)+"?"),fb=g(g("\\/\\/"+Ca+u)+"|"+G+"|"+ca+"|"+H),Ga=g(fb+g("\\?"+I)+"?"+g("\\#"+P)+"?");g(Fa+"|"+Ga);g(ba+"\\:"+Ea+g("\\?"+I)+"?");var gb=RegExp("^"+g("("+Fa+")|("+Ga+")")+"$"),hb=RegExp("^("+ba+")\\:"+g(g("\\/\\/("+g("("+N+")@")+"?("+V+")"+g("\\:("+O+")")+"?)")+"?("+u+"|"+G+"|"+X+"|"+H+")")+g("\\?("+I+")")+"?"+g("\\#("+P+")")+"?$"),ib=RegExp("^(){0}"+g(g("\\/\\/("+g("("+N+")@")+"?("+V+
")"+g("\\:("+O+")")+"?)")+"?("+u+"|"+G+"|"+ca+"|"+H+")")+g("\\?("+I+")")+"?"+g("\\#("+P+")")+"?$");g(g("\\/\\/("+g("("+N+")@")+"?("+V+")"+g("\\:("+O+")")+"?)")+"?("+u+"|"+G+"|"+X+"|"+H+")");g("\\?("+I+")");g("\\#("+P+")");g("("+N+")@");g("\\:("+O+")");var jb=RegExp(p("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),kb=RegExp(p("[^\\%\\:]",s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),lb=RegExp(p("[^\\%]",s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),mb=RegExp(p("[^\\%\\/\\:\\@]",s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),
"g"),nb=RegExp(p("[^\\%\\/\\@]",s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),Ha=RegExp(p("[^\\%]",s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]"),"g"),ob=RegExp(p("[^]",s,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),pb=RegExp(s,"g");p("[^\\%]",s,Za);var Ia=RegExp(M+"+","g"),qb=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/i,Ja=/^\.\.?\//,Ka=/^\/\.(\/|$)/,La=/^\/\.\.(\/|$)/,rb=/^\/?.*?(?=\/|$)/,sb=void 0==="".match(/(){0}/)[1],v=function(a){a=
a.charCodeAt(0);return 128>a?"%"+a.toString(16).toUpperCase():127<a&&2048>a?"%"+(a>>6|192).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase():"%"+(a>>12|224).toString(16).toUpperCase()+"%"+(a>>6&63|128).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase()},tb=function(a){for(var b="",c=0,d;c<a.length;)d=parseInt(a.substr(c+1,2),16),128>d?(d=String.fromCharCode(d),b=d.match(pb)?b+d:b+a.substr(c,3),c+=3):191<d&&224>d?(b+=a.substr(c,6),c+=6):(b+=a.substr(c,9),c+=9);
return b},da=function(a){for(var b="",c=0,d,e,f;c<a.length;)d=parseInt(a.substr(c+1,2),16),128>d?(b+=String.fromCharCode(d),c+=3):191<d&&224>d?(e=parseInt(a.substr(c+4,2),16),b+=String.fromCharCode((d&31)<<6|e&63),c+=6):(e=parseInt(a.substr(c+4,2),16),f=parseInt(a.substr(c+7,2),16),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=9);return b},ea=function(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()},Q=function(){this.errors=
[]},k=exports;Q.prototype={scheme:void 0,authority:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,reference:void 0,errors:void 0};k.SCHEMES={};k.parse=function(a,b){var c,d=new Q,a=a?a.toString():"",b=b||{};"suffix"===b.reference&&(a=(b.scheme?b.scheme+":":"")+"//"+a);(c=a.match(gb))&&(c=c[1]?a.match(hb):a.match(ib));c||(b.tolerant||d.errors.push("URI is not strictly valid."),c=a.match(qb));c?(sb?(d.scheme=c[1],d.authority=c[2],d.userinfo=c[3],d.host=c[4],
d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=c[7],d.fragment=c[8],isNaN(d.port)&&(d.port=c[5])):(d.scheme=c[1]||void 0,d.authority=-1!==a.indexOf("//")?c[2]:void 0,d.userinfo=-1!==a.indexOf("@")?c[3]:void 0,d.host=-1!==a.indexOf("//")?c[4]:void 0,d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=-1!==a.indexOf("?")?c[7]:void 0,d.fragment=-1!==a.indexOf("#")?c[8]:void 0,isNaN(d.port)&&(d.port=a.match(/\/\/.*\:(?:\/|\?|\#|$)/)?c[4]:void 0)),d.reference=!d.scheme&&!d.authority&&!d.path&&!d.query?
"same-document":d.scheme?d.fragment?"uri":"absolute":"relative",b.reference&&("suffix"!==b.reference&&b.reference!==d.reference)&&d.errors.push("URI is not a "+b.reference+" reference."),(c=k.SCHEMES[(d.scheme||b.scheme||"").toLowerCase()])&&c.parse&&c.parse(d,b)):d.errors.push("URI can not be parsed.");return d};k._recomposeAuthority=function(a){var b=[];if(void 0!==a.userinfo||void 0!==a.host||"number"===typeof a.port)if(void 0!==a.userinfo&&(b.push(a.userinfo.toString().replace(kb,v)),b.push("@")),
void 0!==a.host&&b.push(a.host.toString().toLowerCase().replace(lb,v)),"number"===typeof a.port)b.push(":"),b.push(a.port.toString(10));return b.length?b.join(""):void 0};k.removeDotSegments=function(a){for(var b=[],c;a.length;)a.match(Ja)?a=a.replace(Ja,""):a.match(Ka)?a=a.replace(Ka,"/"):a.match(La)?(a=a.replace(La,"/"),b.pop()):"."===a||".."===a?a="":(c=a.match(rb)[0],a=a.slice(c.length),b.push(c));return b.join("")};k.serialize=function(a,b){var c=[],d,b=b||{};(d=k.SCHEMES[a.scheme||b.scheme])&&
d.serialize&&d.serialize(a,b);"suffix"!==b.reference&&a.scheme&&(c.push(a.scheme.toString().toLowerCase().replace(jb,"")),c.push(":"));a.authority=k._recomposeAuthority(a);void 0!==a.authority&&("suffix"!==b.reference&&c.push("//"),c.push(a.authority),a.path&&"/"!==a.path.charAt(0)&&c.push("/"));a.path&&(d=k.removeDotSegments(a.path.toString().replace(/%2E/ig,".")),d=a.scheme?d.replace(mb,v):d.replace(nb,v),void 0===a.authority&&(d=d.replace(/^\/\//,"/%2F")),c.push(d));a.query&&(c.push("?"),c.push(a.query.toString().replace(Ha,
v)));a.fragment&&(c.push("#"),c.push(a.fragment.toString().replace(Ha,v)));return c.join("").replace(Ia,tb).replace(/%[0-9A-Fa-f]{2}/g,function(a){return a.toUpperCase()})};k.resolveComponents=function(a,b,c,d){var e=new Q;d||(a=k.parse(k.serialize(a,c),c),b=k.parse(k.serialize(b,c),c));c=c||{};!c.tolerant&&b.scheme?(e.scheme=b.scheme,e.authority=b.authority,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=k.removeDotSegments(b.path),e.query=b.query):(void 0!==b.authority?(e.authority=b.authority,
e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=k.removeDotSegments(b.path),e.query=b.query):(b.path?("/"===b.path.charAt(0)?e.path=k.removeDotSegments(b.path):(e.path=void 0!==a.authority&&!a.path?"/"+b.path:a.path?a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:b.path,e.path=k.removeDotSegments(e.path)),e.query=b.query):(e.path=a.path,e.query=void 0!==b.query?b.query:a.query),e.authority=a.authority,e.userinfo=a.userinfo,e.host=a.host,e.port=a.port),e.scheme=a.scheme);e.fragment=b.fragment;
return e};k.resolve=function(a,b,c){return k.serialize(k.resolveComponents(k.parse(a,c),k.parse(b,c),c,!0),c)};k.normalize=function(a,b){return"string"===typeof a?k.serialize(k.parse(a,b),b):"object"===ea(a)?k.parse(k.serialize(a,b),b):a};k.equal=function(a,b,c){"string"===typeof a?a=k.serialize(k.parse(a,c),c):"object"===ea(a)&&(a=k.serialize(a,c));"string"===typeof b?b=k.serialize(k.parse(b,c),c):"object"===ea(b)&&(b=k.serialize(b,c));return a===b};k.escapeComponent=function(a){return a&&a.toString().replace(ob,
v)};k.unescapeComponent=function(a){return a&&a.toString().replace(Ia,da)};exports.pctEncChar=v;exports.pctDecChars=da;exports.Components=Q;exports.URI=k;exports.pctEncChar=v;exports.pctDecChars=da;exports.Components=Q;exports.URI={SCHEMES:k.SCHEMES,parse:k.parse,removeDotSegments:k.removeDotSegments,serialize:k.serialize,resolveComponents:k.resolveComponents,resolve:k.resolve,normalize:k.normalize,equal:k.equal,escapeComponent:k.escapeComponent,unescapeComponent:k.unescapeComponent};var ya=exports.URI,
z={},m="0123456789abcdef".split(""),L,fa,J,i;L=function(a,b,c){for(var d=0,e=a.length,f=Array(e);d<e;++d)f[d]=b.call(c,a[d],d,a);return f};Array.prototype.map&&(L=function(a,b,c){return Array.prototype.map.call(a,b,c)});fa=function(a,b,c){for(var d=0,e=a.length,f=[];d<e;++d)b.call(c,a[d],d,a)&&(f[f.length]=a[d]);return f};Array.prototype.filter&&(fa=function(a,b,c){return Array.prototype.filter.call(a,b,c)});J=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1};Array.prototype.indexOf&&
(J=function(a,b){return Array.prototype.indexOf.call(a,b)});C.prototype=Error();C.prototype.constructor=C;C.prototype.name="InitializationError";F.prototype.addError=function(a,b,c,d,e){this.errors.push({uri:a instanceof n?a.getURI():a,schemaUri:b instanceof n?b.getURI():b,attribute:c,message:d,details:aa(e)})};F.prototype.registerValidation=function(a,b){this.validated[a]?this.validated[a].push(b):this.validated[a]=[b]};F.prototype.isValidatedBy=function(a,b){return!!this.validated[a]&&-1!==J(this.validated[a],
b)};n.prototype.getEnvironment=function(){return this._env};n.prototype.getType=function(){return t(this._value)};n.prototype.getValue=function(){return this._value};n.prototype.getURI=function(){return this._uri};n.prototype.resolveURI=function(a){return B(ya.resolve(this._uri,a))};n.prototype.getPropertyNames=function(){return xa(this._value)};n.prototype.getProperty=function(a){var b=this._value?this._value[a]:void 0;return b instanceof n?b:new n(this._env,b,this._uri+this._fd+A(a),this._fd)};
n.prototype.getProperties=function(){var a=t(this._value),b=this;if("object"===a)return $(this._value,function(a,d){return a instanceof n?a:new n(b._env,a,b._uri+b._fd+A(d),b._fd)});if("array"===a)return L(this._value,function(a,d){return a instanceof n?a:new n(b._env,a,b._uri+b._fd+A(d),b._fd)})};n.prototype.getValueOfProperty=function(a){if(this._value)return this._value[a]instanceof n?this._value[a]._value:this._value[a]};n.prototype.equals=function(a){return a instanceof n?this._value===a._value:
this._value===a};o.prototype=K(n.prototype);o.prototype.getSchema=function(){var a=this._refs&&this._refs.describedby,b;if(a)if(b=a&&this._env.findSchema(a))b.equals(this._schema)||(this._schema=b,this.rebuild());else if(this._env._options.enforceReferences)throw new C(this,this._schema,"{describedby}","Unknown schema reference",a);return this._schema};o.prototype.getAttribute=function(a,b){var c,d,e;c=this.getSchema();if(!b&&this._attributes&&this._attributes.hasOwnProperty(a))return this._attributes[a];
c=c.getProperty("properties").getProperty(a);d=c.getValueOfProperty("parser");e=this.getProperty(a);return"function"===typeof d?(c=d(e,c,b),!b&&this._attributes&&(this._attributes[a]=c),c):e.getValue()};o.prototype.getAttributes=function(){var a,b,c,d,e;b=this.getSchema();if(!this._attributes&&"object"===this.getType())for(c in a=this.getProperties(),b=b.getProperty("properties"),this._attributes={},a)a[c]!==z[c]&&(e=(d=b&&b.getProperty(c))&&d.getValueOfProperty("parser"),this._attributes[c]="function"===
typeof e?e(a[c],d):a[c].getValue());return y(this._attributes,!1)};o.prototype.getLink=function(a,b){var c=this.getAttribute("links",[a,b]);if(c&&c.length&&c[c.length-1])return c[c.length-1]};o.prototype.validate=function(a,b,c,d,e){var f=this.getSchema(),j=f.getValueOfProperty("validator");a instanceof n||(a=this.getEnvironment().createInstance(a));b instanceof F||(b=new F);this._env._options.validateReferences&&this._refs&&(this._refs.describedby&&!this._env.findSchema(this._refs.describedby)&&
b.addError(this,this._schema,"{describedby}","Unknown schema reference",this._refs.describedby),this._refs.full&&!this._env.findSchema(this._refs.full)&&b.addError(this,this._schema,"{full}","Unknown schema reference",this._refs.full));"function"===typeof j&&!b.isValidatedBy(a.getURI(),this.getURI())&&(b.registerValidation(a.getURI(),this.getURI()),j(a,this,f,b,c,d,e));return b};for(var R in o.prototype)o.prototype[R]!==z[R]&&"function"===t(o.prototype[R])&&(o.prototype[R]=Ya(o.prototype[R]));o.prototype.rebuild=
function(){var a=this,b=a.getSchema().getValueOfProperty("initializer");a._refs=null;a._attributes=null;"function"===typeof b&&(a=b(a));a._env._schemas[a._uri]=a;a.getAttributes();return a};o.prototype.setReference=function(a,b){this._refs||(this._refs={});this._refs[a]=this.resolveURI(b)};o.prototype.getReference=function(a){return this._refs&&this._refs[a]};q.prototype.clone=function(){var a=new q;a._schemas=K(this._schemas);a._options=K(this._options);return a};q.prototype.createInstance=function(a,
b){b=B(b);return a instanceof n&&(!b||a.getURI()===b)?a:new n(this,a,b)};q.prototype.createSchema=function(a,b,c){c=B(c);return a instanceof o&&(!c||a._uri===c)&&(!b||a.getSchema().equals(b))?a:new o(this,a,c,b)};q.prototype.createEmptySchema=function(){return this._schemas["urn:jsv:empty-schema#"]};q.prototype.findSchema=function(a){return this._schemas[B(a)]};q.prototype.setOption=function(a,b){this._options[a]=b};q.prototype.getOption=function(a){return this._options[a]};q.prototype.setDefaultFragmentDelimiter=
function(a){"string"===typeof a&&0<a.length&&(this._options.defaultFragmentDelimiter=a)};q.prototype.getDefaultFragmentDelimiter=function(){return this._options.defaultFragmentDelimiter};q.prototype.setDefaultSchemaURI=function(a){"string"===typeof a&&(this._options.defaultSchemaURI=B(a))};q.prototype.getDefaultSchema=function(){return this.findSchema(this._options.defaultSchemaURI)};q.prototype.validate=function(a,b){var c,d,e,f=new F;try{c=this.createInstance(a),f.instance=c}catch(j){f.addError(j.uri,
j.schemaUri,j.attribute,j.message,j.details)}try{d=this.createSchema(b),f.schema=d,e=d.getSchema(),f.schemaSchema=e}catch(h){f.addError(h.uri,h.schemaUri,h.attribute,h.message,h.details)}e&&e.validate(d,f);return f.errors.length?f:d.validate(c,f)};q.prototype._checkForInvalidInstances=function(a,b){for(var c=[],d=[[b,this._schemas[b]]],e=0,f,j,h;e++<a&&d.length;)if(f=d.shift(),j=f[0],f=f[1],f instanceof o)if(this._schemas[f._uri]!==f)c.push("Instance "+j+" does not match "+f._uri);else for(h in f=
f.getAttributes(),f)f[h]!==z[h]&&d.push([j+"/"+A(h),f[h]]);else if("object"===t(f))for(h in f)f.hasOwnProperty(h)&&d.push([j+"/"+A(h),f[h]]);else if("array"===t(f))for(h=0;h<f.length;++h)d.push([j+"/"+A(h),f[h]]);return c.length?c:e};this.JSV=i={_environments:{},_defaultEnvironmentID:"",isJSONInstance:function(a){return a instanceof n},isJSONSchema:function(a){return a instanceof o},createEnvironment:function(a){a=a||this._defaultEnvironmentID;if(!this._environments[a])throw Error("Unknown Environment ID");
return this._environments[a].clone()},Environment:q,registerEnvironment:function(a,b){if((a=a||(b||0)._id)&&!this._environments[a]&&b instanceof q)b._id=a,this._environments[a]=b},setDefaultEnvironmentID:function(a){if("string"===typeof a){if(!this._environments[a])throw Error("Unknown Environment ID");this._defaultEnvironmentID=a}},getDefaultEnvironmentID:function(){return this._defaultEnvironmentID},typeOf:t,createObject:K,mapObject:$,mapArray:L,filterArray:fa,searchArray:J,toArray:function(a){return void 0!==
a&&null!==a?a instanceof Array&&!a.callee?a:"number"!==typeof a.length||a.split||a.setInterval||a.call?[a]:Array.prototype.slice.call(a):[]},keys:xa,pushUnique:function(a,b){-1===J(a,b)&&a.push(b);return a},popFirst:function(a,b){var c=J(a,b);-1<c&&a.splice(c,1);return a},clone:y,randomUUID:S,escapeURIComponent:A,formatURI:B,inherits:za,InitializationError:C};exports.JSV=i;var D={},w,ga,ha,Ma;ga={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===
a.getType()&&0===a.getValue()%1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}};w=new i.Environment;w.setOption("defaultFragmentDelimiter",".");w.setOption("defaultSchemaURI","http://json-schema.org/schema#");ha=w.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/schema#",type:"object",properties:{type:{type:["string",
"array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var c;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(c=b.getValueOfProperty("parser"),i.mapArray(a.getProperties(),function(a){return c(a,b)})):"any"},validator:function(a,b,c,d,e,f,j){var h=i.toArray(b.getAttribute("type")),Na,g,k,l;if("undefined"!==a.getType()&&h&&h.length){l=
c.getValueOfProperty("typeValidators")||{};c=0;for(Na=h.length;c<Na;++c)if(g=h[c],i.isJSONSchema(g)){if(k=i.createObject(d),k.errors=[],k.validated=i.clone(d.validated),0===g.validate(a,k,e,f,j).errors.length)return!0}else if(l[g]!==D[g]&&"function"===typeof l[g]){if(l[g](a,d))return!0}else return!0;d.addError(a,b,"type","Instance is not a required type",h);return!1}return!0},typeValidators:ga},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,
c){var d=a.getEnvironment(),e=b.getEnvironment();return"object"===a.getType()?c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI("#"))):i.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,c,d){var e;if("object"===a.getType())for(e in c=b.getAttribute("properties"),c)c[e]!==D[e]&&c[e]&&c[e].validate(a.getProperty(e),d,a,b,e)}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,
b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?i.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d){var e,f,j,h,g;if("array"===a.getType())if(c=a.getProperties(),e=b.getAttribute("items"),g=b.getAttribute("additionalProperties"),"array"===i.typeOf(e)){f=0;for(j=
c.length;f<j;++f)h=e[f]||g,!1!==h?h.validate(c[f],d,a,b,f):d.addError(a,b,"additionalProperties","Additional items are not allowed",h)}else{h=e||g;f=0;for(j=c.length;f<j;++f)h.validate(c[f],d,a,b,f)}}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===a.getType()&&!b.getAttribute("optional")&&d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],
optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&!1===a.getValue()?!1:a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d){var e,f,j;if("object"===a.getType())for(j in c=b.getAttribute("additionalProperties"),e=b.getAttribute("properties")||{},f=a.getProperties(),f)f[j]!==D[j]&&(f[j]&&!e[j])&&(i.isJSONSchema(c)?c.validate(f[j],d,a,b,j):!1===c&&d.addError(a,
b,"additionalProperties","Additional properties are not allowed",c))}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue();if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))},validator:function(a,b,c,d,e){"undefined"!==a.getType()&&(e&&"undefined"!==e.getType())&&(c=b.getAttribute("requires"),"string"===typeof c?"undefined"===e.getProperty(c).getType()&&d.addError(a,b,
"requires",'Property requires sibling property "'+c+'"',c):i.isJSONSchema(c)&&c.validate(e,d))}},minimum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("minimum"),e=b.getAttribute("minimumCanEqual"),"number"===typeof c&&(a.getValue()<c||!1===e&&a.getValue()===c)&&d.addError(a,b,"minimum","Number is less than the required minimum value",c))}},maximum:{type:"number",optional:!0,
parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maximum"),e=b.getAttribute("maximumCanEqual"),"number"===typeof c&&(a.getValue()>c||!1===e&&a.getValue()===c)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",c))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",
optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("minItems"),"number"===typeof c&&a.getProperties().length<c&&d.addError(a,b,"minItems","The number of items is less than the required minimum",c))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===
a.getType())return a.getValue()},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("maxItems"),"number"===typeof c&&a.getProperties().length>c&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",c))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;try{e=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&(e&&!e.test(a.getValue()))&&d.addError(a,
b,"pattern","String does not match pattern",e.toString())}catch(f){d.addError(a,b,"pattern","Invalid pattern",f)}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("minLength"),"number"===typeof c&&a.getValue().length<c&&d.addError(a,b,"minLength","String is less than the required minimum length",c))}},maxLength:{type:"integer",optional:!0,parser:function(a){if("number"===
a.getType())return a.getValue()},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("maxLength"),"number"===typeof c&&a.getValue().length>c&&d.addError(a,b,"maxLength","String is greater than the required maximum length",c))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){if("array"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e,f;if("undefined"!==a.getType()&&(c=b.getAttribute("enum"))){e=0;for(f=c.length;e<f;++e)if(a.equals(c[e]))return!0;
d.addError(a,b,"enum","Instance is not one of the possible values",c)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"string"===a.getType()&&(e=b.getAttribute("format"),c=c.getValueOfProperty("formatValidators"),"string"===typeof e&&(c[e]!==D[e]&&"function"===typeof c[e]&&!c[e].call(this,a,d))&&d.addError(a,b,"format","String is not in the required format",
e))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maxDecimal"),"number"===typeof c&&(e=a.getValue().toString(10).split(".")[1])&&e.length>c&&d.addError(a,b,"maxDecimal","The number of decimal places is greater than the allowed maximum",c))}},disallow:{type:["string",
"array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e=i.toArray(b.getAttribute("disallow")),f,j,h;if("undefined"!==a.getType()&&e&&e.length){h=c.getValueOfProperty("typeValidators")||{};c=0;for(f=e.length;c<f;++c)if(j=e[c],h[j]!==D[j]&&"function"===typeof h[j]&&h[j](a,d))return d.addError(a,b,"disallow","Instance is a disallowed type",e),!1}return!0},typeValidators:ga},"extends":{type:[{$ref:"#"},
"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")));if("array"===a.getType())return i.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))})},validator:function(a,b,c,d,e,f,j){var b=b.getAttribute("extends"),h;if(b)if(i.isJSONSchema(b))b.validate(a,d,e,f,j);else if("array"===i.typeOf(b)){c=
0;for(h=b.length;c<h;++c)b[c].validate(a,d,e,f,j)}}}},optional:!0,"default":{},fragmentResolution:"dot-delimited",parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,d,e,f,j){var h=b.getPropertyNames(),g,k=c.getAttribute("properties"),l;for(g in k)k[g]!==D[g]&&k[g].getValueOfProperty("validationRequired")&&i.pushUnique(h,g);g=0;for(c=h.length;g<c;++g)k[h[g]]!==D[h[g]]&&(l=k[h[g]].getValueOfProperty("validator"),"function"===typeof l&&
l(a,b,k[h[g]],d,e,f,j))},initializer:function(a){var b;(b=a._schema.getLink("describedby",a))&&a._schema._uri!==b&&a.setReference("describedby",b);b=a._schema.getLink("self",a);"string"===i.typeOf(b)&&(a._uri=i.formatURI(b));(b=a._schema.getLink("full",a))&&a._uri!==b&&a.setReference("full",b);b=a.getAttribute("extends");i.isJSONSchema(b)&&(b=i.inherits(b,a,!0),a=a._env.createSchema(b,a._schema,a._uri));return a}},!0,"http://json-schema.org/schema#");Ma=w.createSchema(i.inherits(ha,w.createSchema({$schema:"http://json-schema.org/hyper-schema#",
id:"http://json-schema.org/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var d=b.getValueOfProperty("items").$ref,e=b.getEnvironment().findSchema(d),f=e&&e.getValueOfProperty("parser"),c=i.toArray(c),a="function"===typeof f?i.mapArray(a.getProperties(),function(a){return f(a,e)}):i.toArray(a.getValue());c[0]&&(a=i.filterArray(a,function(a){return a.rel===c[0]}));c[1]&&(a=i.mapArray(a,function(a){var b=c[1],a=a.href;return(a=a.replace(/\{(.+)\}/g,
function(a,c){var d;d="-this"===c?b.getValue():b.getValueOfProperty(c);return void 0!==d?String(d):""}))?i.formatURI(b.resolveURI(a)):a}));return a}},fragmentResolution:{type:"string",optional:!0,"default":"dot-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d){"undefined"!==a.getType()&&(c=b.getAttribute("pathStart"),"string"===typeof c&&0!==a.getURI().indexOf(c)&&
d.addError(a,b,"pathStart","Instance's URI does not start with "+c,c))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}]},ha),!0),!0,"http://json-schema.org/hyper-schema#");w.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#");w.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/links#",
type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string","default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment(),f=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(f))):i.mapObject(a.getProperties(),
function(a){return d.createSchema(a,e.findSchema(b.resolveURI(f)))})}}},parser:function(a,b){var c=b.getProperty("properties");return"object"===a.getType()?i.mapObject(a.getProperties(),function(a,b){var f=c.getProperty(b),j=f&&f.getValueOfProperty("parser");return"function"===typeof j?j(a,f):a.getValue()}):a.getValue()}},Ma,"http://json-schema.org/links#");i.registerEnvironment("json-schema-draft-00",w);i.registerEnvironment("json-schema-draft-01",i.createEnvironment("json-schema-draft-00"));i.getDefaultEnvironmentID()||
i.setDefaultEnvironmentID("json-schema-draft-01");var E={},x,ia,ja,ka;ia={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===a.getType()&&0===a.getValue()%1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}};x=new i.Environment;x.setOption("defaultFragmentDelimiter",
"/");x.setOption("defaultSchemaURI","http://json-schema.org/schema#");ja=x.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var c;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?
(c=b.getValueOfProperty("parser"),i.mapArray(a.getProperties(),function(a){return c(a,b)})):"any"},validator:function(a,b,c,d,e,f,j){var h=i.toArray(b.getAttribute("type")),g,k,l,m;if("undefined"!==a.getType()&&h&&h.length){m=c.getValueOfProperty("typeValidators")||{};c=0;for(g=h.length;c<g;++c)if(k=h[c],i.isJSONSchema(k)){if(l=i.createObject(d),l.errors=[],l.validated=i.clone(d.validated),0===k.validate(a,l,e,f,j).errors.length)return!0}else if(m[k]!==E[k]&&"function"===typeof m[k]){if(m[k](a,d))return!0}else return!0;
d.addError(a,b,"type","Instance is not a required type",h);return!1}return!0},typeValidators:ia},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment();return"object"===a.getType()?c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI("#"))):i.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,c,d){var e;if("object"===a.getType())for(e in c=
b.getAttribute("properties"),c)c[e]!==E[e]&&c[e]&&c[e].validate(a.getProperty(e),d,a,b,e)}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?i.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,
b,c,d){var e,f,j,h,g;if("array"===a.getType())if(c=a.getProperties(),e=b.getAttribute("items"),g=b.getAttribute("additionalProperties"),"array"===i.typeOf(e)){f=0;for(j=c.length;f<j;++f)h=e[f]||g,!1!==h?h.validate(c[f],d,a,b,f):d.addError(a,b,"additionalProperties","Additional items are not allowed",h)}else{h=e||g;f=0;for(j=c.length;f<j;++f)h.validate(c[f],d,a,b,f)}}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===
a.getType()&&!b.getAttribute("optional")&&d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&!1===a.getValue()?!1:a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d){var e,f,j;if("object"===a.getType())for(j in c=b.getAttribute("additionalProperties"),
e=b.getAttribute("properties")||{},f=a.getProperties(),f)f[j]!==E[j]&&(f[j]&&!e[j])&&(i.isJSONSchema(c)?c.validate(f[j],d,a,b,j):!1===c&&d.addError(a,b,"additionalProperties","Additional properties are not allowed",c))}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue();if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))},validator:function(a,b,c,d,e){"undefined"!==a.getType()&&
(e&&"undefined"!==e.getType())&&(c=b.getAttribute("requires"),"string"===typeof c?"undefined"===e.getProperty(c).getType()&&d.addError(a,b,"requires",'Property requires sibling property "'+c+'"',c):i.isJSONSchema(c)&&c.validate(e,d))}},minimum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("minimum"),e=b.getAttribute("minimumCanEqual"),"number"===typeof c&&(a.getValue()<c||!1===
e&&a.getValue()===c)&&d.addError(a,b,"minimum","Number is less than the required minimum value",c))}},maximum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maximum"),e=b.getAttribute("maximumCanEqual"),"number"===typeof c&&(a.getValue()>c||!1===e&&a.getValue()===c)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",c))}},minimumCanEqual:{type:"boolean",
optional:!0,requires:"minimum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("minItems"),"number"===typeof c&&a.getProperties().length<
c&&d.addError(a,b,"minItems","The number of items is less than the required minimum",c))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("maxItems"),"number"===typeof c&&a.getProperties().length>c&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",c))}},uniqueItems:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},
validator:function(a,b,c,d){var e,f,j,h;if("array"===a.getType()&&b.getAttribute("uniqueItems")){c=a.getProperties();e=0;for(f=c.length-1;e<f;++e){j=e+1;for(h=c.length;j<h;++j)c[e].equals(c[j])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:e,y:j})}}}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;try{e=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&(e&&!e.test(a.getValue()))&&
d.addError(a,b,"pattern","String does not match pattern",e.toString())}catch(f){d.addError(a,b,"pattern","Invalid pattern",f)}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("minLength"),"number"===typeof c&&a.getValue().length<c&&d.addError(a,b,"minLength","String is less than the required minimum length",c))}},maxLength:{type:"integer",optional:!0,
parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("maxLength"),"number"===typeof c&&a.getValue().length>c&&d.addError(a,b,"maxLength","String is greater than the required maximum length",c))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){if("array"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e,f;if("undefined"!==a.getType()&&(c=b.getAttribute("enum"))){e=0;
for(f=c.length;e<f;++e)if(a.equals(c[e]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",c)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"string"===a.getType()&&(e=b.getAttribute("format"),c=c.getValueOfProperty("formatValidators"),"string"===typeof e&&(c[e]!==E[e]&&"function"===typeof c[e]&&!c[e].call(this,
a,d))&&d.addError(a,b,"format","String is not in the required format",e))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"number"===a.getType()&&(c=b.getAttribute("divisibleBy"),0===c?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",c):1!==c&&0!==a.getValue()/c%1&&d.addError(a,
b,"divisibleBy","Number is not divisible by "+c,c))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e=i.toArray(b.getAttribute("disallow")),f,j,h;if("undefined"!==a.getType()&&e&&e.length){h=c.getValueOfProperty("typeValidators")||{};c=0;for(f=e.length;c<f;++c)if(j=e[c],h[j]!==E[j]&&"function"===typeof h[j]&&h[j](a,d))return d.addError(a,b,"disallow",
"Instance is a disallowed type",e),!1}return!0},typeValidators:ia},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")));if("array"===a.getType())return i.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))})},validator:function(a,b,c,d,e,f,j){var b=b.getAttribute("extends"),
h;if(b)if(i.isJSONSchema(b))b.validate(a,d,e,f,j);else if("array"===i.typeOf(b)){c=0;for(h=b.length;c<h;++c)b[c].validate(a,d,e,f,j)}}}},optional:!0,"default":{},fragmentResolution:"slash-delimited",parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,d,e,f,j){var h=b.getPropertyNames(),g,k=c.getAttribute("properties"),l;for(g in k)k[g]!==E[g]&&k[g].getValueOfProperty("validationRequired")&&i.pushUnique(h,g);g=0;for(c=h.length;g<c;++g)k[h[g]]!==
E[h[g]]&&(l=k[h[g]].getValueOfProperty("validator"),"function"===typeof l&&l(a,b,k[h[g]],d,e,f,j))},initializer:function(a){var b;(b=a._schema.getLink("describedby",a))&&a._schema._uri!==b&&a.setReference("describedby",b);b=a._schema.getLink("self",a);"string"===i.typeOf(b)&&(a._uri=i.formatURI(b));(b=a._schema.getLink("full",a))&&a._uri!==b&&a.setReference("full",b);b=a.getAttribute("extends");i.isJSONSchema(b)&&(b=i.inherits(b,a,!0),a=a._env.createSchema(b,a._schema,a._uri));return a}},!0,"http://json-schema.org/schema#");
ka=x.createSchema(i.inherits(ja,x.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var d=b.getValueOfProperty("items").$ref,e=b.getEnvironment().findSchema(d),f=e&&e.getValueOfProperty("parser"),c=i.toArray(c),a="function"===typeof f?i.mapArray(a.getProperties(),function(a){return f(a,e)}):i.toArray(a.getValue());c[0]&&(a=i.filterArray(a,function(a){return a.rel===
c[0]}));c[1]&&(a=i.mapArray(a,function(a){var b=c[1],a=a.href;return(a=a.replace(/\{(.+)\}/g,function(a,c){var d;d="-this"===c?b.getValue():b.getValueOfProperty(c);return void 0!==d?String(d):""}))?i.formatURI(b.resolveURI(a)):a}));return a}},fragmentResolution:{type:"string",optional:!0,"default":"slash-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d){"undefined"!==
a.getType()&&(c=b.getAttribute("pathStart"),"string"===typeof c&&0!==a.getURI().indexOf(c)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+c,c))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}]},ja),!0),!0,"http://json-schema.org/hyper-schema#");x.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#");x.createSchema({$schema:"http://json-schema.org/hyper-schema#",
id:"http://json-schema.org/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},targetSchema:{$ref:"hyper-schema#",parser:ka.getAttribute("parser")},method:{type:"string","default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment(),f=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?
d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(f))):i.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI(f)))})}}},parser:function(a,b){var c=b.getProperty("properties");return"object"===a.getType()?i.mapObject(a.getProperties(),function(a,b){var f=c.getProperty(b),j=f&&f.getValueOfProperty("parser");return"function"===typeof j?j(a,f):a.getValue()}):a.getValue()}},ka,"http://json-schema.org/links#");i.registerEnvironment("json-schema-draft-02",x);
(!i.getDefaultEnvironmentID()||"json-schema-draft-01"===i.getDefaultEnvironmentID())&&i.setDefaultEnvironmentID("json-schema-draft-02");var Oa=function(a,b,c,d){var e={},f,j,h,g;if("object"===a.getType())for(j in f=b.getAttribute("patternProperties"),h=a.getProperties(),f)if(f[j]!==r[j]){a=null;try{a=RegExp(j)}catch(k){c&&c.addError(b,d,"patternProperties","Invalid pattern",j)}if(a)for(g in h)h[g]!==r[g]&&a.test(g)&&(e[g]=e[g]?i.pushUnique(e[g],f[j]):[f[j]])}return e},r={},la,l,ma,na,oa,Pa,Qa,pa,
qa,ra,Ra,sa,Y,ta,ua,Z,Sa,Ta,Ua,Va,va,Wa,Xa;la={string:function(a){return"string"===a.getType()},number:function(a){return"number"===a.getType()},integer:function(a){return"number"===a.getType()&&0===a.getValue()%1},"boolean":function(a){return"boolean"===a.getType()},object:function(a){return"object"===a.getType()},array:function(a){return"array"===a.getType()},"null":function(a){return"null"===a.getType()},any:function(){return!0}};l=new i.Environment;l.setOption("validateReferences",!0);l.setOption("enforceReferences",
!1);l.setOption("strict",!1);ma={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,"default":"any",parser:function(a,b){var c;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(c=b.getValueOfProperty("parser"),i.mapArray(a.getProperties(),
function(a){return c(a,b)})):"any"},validator:function(a,b,c,d,e,f,j){var h=i.toArray(b.getAttribute("type")),g,k,l,m;if("undefined"!==a.getType()&&h&&h.length){m=c.getValueOfProperty("typeValidators")||{};c=0;for(g=h.length;c<g;++c)if(k=h[c],i.isJSONSchema(k)){if(l=i.createObject(d),l.errors=[],l.validated=i.clone(d.validated),0===k.validate(a,l,e,f,j).errors.length)return!0}else if(m[k]!==r[k]&&"function"===typeof m[k]){if(m[k](a,d))return!0}else return!0;d.addError(a,b,"type","Instance is not a required type",
h);return!1}return!0},typeValidators:la},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,"default":{},parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment();return"object"===a.getType()?c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI("#"))):i.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,c,d){var e;if("object"===a.getType())for(e in c=b.getAttribute("properties"),c)c[e]!==
r[e]&&c[e]&&c[e].validate(a.getProperty(e),d,a,b,e)}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?i.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d){var e,f,j,h,g;
if("array"===a.getType())if(c=a.getProperties(),e=b.getAttribute("items"),g=b.getAttribute("additionalProperties"),"array"===i.typeOf(e)){f=0;for(j=c.length;f<j;++f)h=e[f]||g,!1!==h?h.validate(c[f],d,a,b,f):d.addError(a,b,"additionalProperties","Additional items are not allowed",h)}else{h=e||g;f=0;for(j=c.length;f<j;++f)h.validate(c[f],d,a,b,f)}}},optional:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===a.getType()&&!b.getAttribute("optional")&&
d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,"default":{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"boolean"===a.getType()&&!1===a.getValue()?!1:a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d){var e,f,j;if("object"===a.getType())for(j in c=b.getAttribute("additionalProperties"),e=b.getAttribute("properties")||
{},f=a.getProperties(),f)f[j]!==r[j]&&(f[j]&&e[j]===r[j])&&(i.isJSONSchema(c)?c.validate(f[j],d,a,b,j):!1===c&&d.addError(a,b,"additionalProperties","Additional properties are not allowed",c))}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue();if("object"===a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))},validator:function(a,b,c,d,e){"undefined"!==a.getType()&&(e&&"undefined"!==
e.getType())&&(c=b.getAttribute("requires"),"string"===typeof c?"undefined"===e.getProperty(c).getType()&&d.addError(a,b,"requires",'Property requires sibling property "'+c+'"',c):i.isJSONSchema(c)&&c.validate(e,d))}},minimum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("minimum"),e=b.getAttribute("minimumCanEqual"),"number"===typeof c&&(a.getValue()<c||!1===e&&a.getValue()===
c)&&d.addError(a,b,"minimum","Number is less than the required minimum value",c))}},maximum:{type:"number",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maximum"),e=b.getAttribute("maximumCanEqual"),"number"===typeof c&&(a.getValue()>c||!1===e&&a.getValue()===c)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",c))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum",
"default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum","default":!0,parser:function(a){return"boolean"===a.getType()?a.getValue():!0}},minItems:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("minItems"),"number"===typeof c&&a.getProperties().length<c&&d.addError(a,b,"minItems",
"The number of items is less than the required minimum",c))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"array"===a.getType()&&(c=b.getAttribute("maxItems"),"number"===typeof c&&a.getProperties().length>c&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",c))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a){if("string"===a.getType())return a.getValue()},
validator:function(a,b,c,d){var e;try{e=RegExp(b.getAttribute("pattern")),"string"===a.getType()&&(e&&!e.test(a.getValue()))&&d.addError(a,b,"pattern","String does not match pattern",e.toString())}catch(f){d.addError(b,c,"pattern","Invalid pattern",b.getValueOfProperty("pattern"))}}},minLength:{type:"integer",optional:!0,minimum:0,"default":0,parser:function(a){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("minLength"),"number"===
typeof c&&a.getValue().length<c&&d.addError(a,b,"minLength","String is less than the required minimum length",c))}},maxLength:{type:"integer",optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){"string"===a.getType()&&(c=b.getAttribute("maxLength"),"number"===typeof c&&a.getValue().length>c&&d.addError(a,b,"maxLength","String is greater than the required maximum length",c))}},"enum":{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a){if("array"===
a.getType())return a.getValue()},validator:function(a,b,c,d){var e,f;if("undefined"!==a.getType()&&(c=b.getAttribute("enum"))){e=0;for(f=c.length;e<f;++e)if(a.equals(c[e]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",c)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"string"===a.getType()&&(e=b.getAttribute("format"),
c=c.getValueOfProperty("formatValidators"),"string"===typeof e&&(c[e]!==r[e]&&"function"===typeof c[e]&&!c[e].call(this,a,d))&&d.addError(a,b,"format","String is not in the required format",e))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},"default":{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maxDecimal"),"number"===
typeof c&&(e=a.getValue().toString(10).split(".")[1])&&e.length>c&&d.addError(a,b,"maxDecimal","The number of decimal places is greater than the allowed maximum",c))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,j){var h=i.toArray(b.getAttribute("disallow")),g,k,l,m;if("undefined"!==a.getType()&&h&&h.length){l=c.getValueOfProperty("typeValidators")||
{};c=0;for(g=h.length;c<g;++c)if(k=h[c],i.isJSONSchema(k)){if(m=i.createObject(d),m.errors=[],m.validated=i.clone(d.validated),0===k.validate(a,m,e,f,j).errors.length)return d.addError(a,b,"disallow","Instance is a disallowed type",h),!1}else if(l[k]!==r[k]&&"function"===typeof l[k]&&l[k](a,d))return d.addError(a,b,"disallow","Instance is a disallowed type",h),!1}return!0},typeValidators:la},"extends":{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,"default":{},parser:function(a,b){if("object"===
a.getType())return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")));if("array"===a.getType())return i.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))})},validator:function(a,b,c,d,e,f,j){var b=b.getAttribute("extends"),h;if(b)if(i.isJSONSchema(b))b.validate(a,d,e,f,j);else if("array"===i.typeOf(b)){c=0;for(h=b.length;c<h;++c)b[c].validate(a,d,e,f,j)}}}},optional:!0,"default":{},fragmentResolution:"dot-delimited",
parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,d,e,f,j){var h=b.getPropertyNames(),g,k,c=c.getAttribute("properties");k=a.getEnvironment().getOption("strict");var l;for(g in c)c[g]!==r[g]&&(c[g].getValueOfProperty("validationRequired")&&i.pushUnique(h,g),k&&c[g].getValueOfProperty("deprecated")&&i.popFirst(h,g));g=0;for(k=h.length;g<k;++g)c[h[g]]!==r[h[g]]&&(l=c[h[g]].getValueOfProperty("validator"),"function"===typeof l&&l(a,b,
c[h[g]],d,e,f,j))}};na={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var d=b.getValueOfProperty("items").$ref,e=b.getEnvironment().findSchema(d),f=e&&e.getValueOfProperty("parser"),g,c=i.toArray(c),a="function"===typeof f?i.mapArray(a.getProperties(),function(a){return f(a,e)}):i.toArray(a.getValue());c[0]&&(a=i.filterArray(a,function(a){return a.rel===
c[0]}));c[1]&&(g=b.getValueOfProperty("selfReferenceVariable"),a=i.mapArray(a,function(a){var b=c[1],a=a.href;return(a=a.replace(/\{(.+)\}/g,function(a,c){var d;d=c===g?b.getValue():b.getValueOfProperty(c);return void 0!==d?String(d):""}))?i.formatURI(b.resolveURI(a)):a}));return a},selfReferenceVariable:"-this"},fragmentResolution:{type:"string",optional:!0,"default":"dot-delimited"},root:{type:"boolean",optional:!0,"default":!1},readonly:{type:"boolean",optional:!0,"default":!1},pathStart:{type:"string",
optional:!0,format:"uri",validator:function(a,b,c,d){"undefined"!==a.getType()&&(c=b.getAttribute("pathStart"),"string"===typeof c&&0!==a.getURI().indexOf(c)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+c,c))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}],initializer:function(a){var b;(b=a._schema.getLink("describedby",
a))&&a._schema._uri!==b&&a.setReference("describedby",b);b=a._schema.getLink("self",a);"string"===i.typeOf(b)&&(a._uri=i.formatURI(b));(b=a._schema.getLink("full",a))&&a._uri!==b&&a.setReference("full",b);b=a.getAttribute("extends");i.isJSONSchema(b)&&(b=i.inherits(b,a,!0),a=a._env.createSchema(b,a._schema,a._uri));return a}};oa={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string",
"default":"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment(),f=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(f))):i.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI(f)))})}}},parser:function(a,
b){var c=b.getProperty("properties");return"object"===a.getType()?i.mapObject(a.getProperties(),function(a,b){var f=c.getProperty(b),g=f&&f.getValueOfProperty("parser");return"function"===typeof g?g(a,f):a.getValue()}):a.getValue()}};l.setOption("defaultFragmentDelimiter",".");l.setOption("defaultSchemaURI","http://json-schema.org/draft-00/schema#");Pa=l.createSchema(ma,!0,"http://json-schema.org/draft-00/schema#");Qa=l.createSchema(i.inherits(Pa,l.createSchema(na,!0,"http://json-schema.org/draft-00/hyper-schema#"),
!0),!0,"http://json-schema.org/draft-00/hyper-schema#");l.setOption("defaultSchemaURI","http://json-schema.org/draft-00/hyper-schema#");l.createSchema(oa,Qa,"http://json-schema.org/draft-00/links#");pa=i.inherits(ma,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/schema#"});qa=i.inherits(na,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/hyper-schema#"});ra=i.inherits(oa,{$schema:"http://json-schema.org/draft-01/hyper-schema#",
id:"http://json-schema.org/draft-01/links#"});l.setOption("defaultSchemaURI","http://json-schema.org/draft-01/schema#");Ra=l.createSchema(pa,!0,"http://json-schema.org/draft-01/schema#");sa=l.createSchema(i.inherits(Ra,l.createSchema(qa,!0,"http://json-schema.org/draft-01/hyper-schema#"),!0),!0,"http://json-schema.org/draft-01/hyper-schema#");l.setOption("defaultSchemaURI","http://json-schema.org/draft-01/hyper-schema#");l.createSchema(ra,sa,"http://json-schema.org/draft-01/links#");Y=i.inherits(pa,
{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/schema#",properties:{uniqueItems:{type:"boolean",optional:!0,"default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){var e,f,g,h;if("array"===a.getType()&&b.getAttribute("uniqueItems")){c=a.getProperties();e=0;for(f=c.length-1;e<f;++e){g=e+1;for(h=c.length;g<h;++g)c[e].equals(c[g])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:e,y:g})}}}},maxDecimal:{deprecated:!0},
divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(a){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d){var e,f;"number"===a.getType()&&(c=b.getAttribute("divisibleBy"),0===c?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",c):1!==c&&(e=a.getValue(),f=Math.max((e.toString().split(".")[1]||" ").length,(c.toString().split(".")[1]||" ").length),f=parseFloat((e/c%1).toFixed(f)),0<f&&1>f&&d.addError(a,b,"divisibleBy","Number is not divisible by "+
c,c)))}}},fragmentResolution:"slash-delimited"});ta=i.inherits(qa,{id:"http://json-schema.org/draft-02/hyper-schema#",properties:{fragmentResolution:{"default":"slash-delimited"}}});ua=i.inherits(ra,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/links#",properties:{targetSchema:{$ref:"hyper-schema#",parser:sa.getAttribute("parser")}}});l.setOption("defaultFragmentDelimiter","/");l.setOption("defaultSchemaURI","http://json-schema.org/draft-02/schema#");
Z=l.createSchema(Y,!0,"http://json-schema.org/draft-02/schema#");Sa=l.createSchema(i.inherits(Z,l.createSchema(ta,!0,"http://json-schema.org/draft-02/hyper-schema#"),!0),!0,"http://json-schema.org/draft-02/hyper-schema#");l.setOption("defaultSchemaURI","http://json-schema.org/draft-02/hyper-schema#");l.createSchema(ua,Sa,"http://json-schema.org/draft-02/links#");Ta=i.inherits(Y,{$schema:"http://json-schema.org/draft-03/schema#",id:"http://json-schema.org/draft-03/schema#",properties:{patternProperties:{type:"object",
additionalProperties:{$ref:"#"},"default":{},parser:Z.getValueOfProperty("properties").properties.parser,validator:function(a,b,c,d){var e,f;if("object"===a.getType())for(e in c=Oa(a,b,d,c),c)if(c[e]!==r[e])for(f=c[e].length;f--;)c[e][f].validate(a.getProperty(e),d,a,b,e)}},additionalProperties:{validator:function(a,b,c,d){var e,f,g,h;if("object"===a.getType())for(h in c=b.getAttribute("additionalProperties"),e=b.getAttribute("properties")||{},f=a.getProperties(),g=Oa(a,b),f)f[h]!==r[h]&&(f[h]&&e[h]===
r[h]&&g[h]===r[h])&&(i.isJSONSchema(c)?c.validate(f[h],d,a,b,h):!1===c&&d.addError(a,b,"additionalProperties","Additional properties are not allowed",c))}},items:{validator:function(a,b,c,d){var e,f,g,h,k;if("array"===a.getType())if(c=a.getProperties(),e=b.getAttribute("items"),k=b.getAttribute("additionalItems"),"array"===i.typeOf(e)){f=0;for(g=c.length;f<g;++f)h=e[f]||k,!1!==h?h.validate(c[f],d,a,b,f):d.addError(a,b,"additionalItems","Additional items are not allowed",h)}else{h=e||k;f=0;for(g=c.length;f<
g;++f)h.validate(c[f],d,a,b,f)}}},additionalItems:{type:[{$ref:"#"},"boolean"],"default":{},parser:Z.getValueOfProperty("properties").additionalProperties.parser,validator:function(a,b,c,d){var e,f,g;if("array"===a.getType()&&"undefined"===b.getProperty("items").getType())if(c=b.getAttribute("additionalItems"),e=a.getProperties(),!1!==c){f=0;for(g=e.length;f<g;++f)c.validate(e[f],d,a,b,f)}else e.length&&d.addError(a,b,"additionalItems","Additional items are not allowed",c)}},optional:{validationRequired:!1,
deprecated:!0},required:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()},validator:function(a,b,c,d){"undefined"===a.getType()&&b.getAttribute("required")&&d.addError(a,b,"required","Property is required",!0)}},requires:{deprecated:!0},dependencies:{type:"object",additionalProperties:{type:["string","array",{$ref:"#"}],items:{type:"string"}},"default":{},parser:function(a,b,c){function d(a){var c=a.getType();if("string"===c||"array"===c)return a.getValue();if("object"===c)return a.getEnvironment().createSchema(a,
b.getEnvironment().findSchema(b.resolveURI("#")))}return"object"===a.getType()?c?d(a.getProperty(c)):i.mapObject(a.getProperties(),d):{}},validator:function(a,b,c,d){var e,f,g,h;if("object"===a.getType())for(e in c=b.getAttribute("dependencies"),c)if(c[e]!==r[e]&&"undefined"!==a.getProperty(e).getType())if(f=c[e],g=i.typeOf(f),"string"===g)"undefined"===a.getProperty(f).getType()&&d.addError(a,b,"dependencies",'Property "'+e+'" requires sibling property "'+f+'"',c);else if("array"===g){g=0;for(h=
f.length;g<h;++g)"undefined"===a.getProperty(f[g]).getType()&&d.addError(a,b,"dependencies",'Property "'+e+'" requires sibling property "'+f[g]+'"',c)}else i.isJSONSchema(f)&&f.validate(a,d)}},minimumCanEqual:{deprecated:!0},maximumCanEqual:{deprecated:!0},exclusiveMinimum:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()}},exclusiveMaximum:{type:"boolean","default":!1,parser:function(a){return!!a.getValue()}},minimum:{validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=
b.getAttribute("minimum"),e=b.getAttribute("exclusiveMinimum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("minimumCanEqual"),"number"===typeof c&&(a.getValue()<c||!0===e&&a.getValue()===c)&&d.addError(a,b,"minimum","Number is less than the required minimum value",c))}},maximum:{validator:function(a,b,c,d){var e;"number"===a.getType()&&(c=b.getAttribute("maximum"),e=b.getAttribute("exclusiveMaximum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("maximumCanEqual"),"number"===
typeof c&&(a.getValue()>c||!0===e&&a.getValue()===c)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",c))}},contentEncoding:{deprecated:!0},divisibleBy:{exclusiveMinimum:!0},disallow:{items:{type:["string",{$ref:"#"}]},parser:Y.properties.type.parser},id:{type:"string",format:"uri"},$ref:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"}},dependencies:{exclusiveMinimum:"minimum",exclusiveMaximum:"maximum"},initializer:function(a){var b,c;b=a.getValueOfProperty("$schema");
c=a.getValueOfProperty("$ref");var d=a.getValueOfProperty("id");b&&(b=a.resolveURI(b),a.setReference("describedby",b));d&&(b=a.resolveURI(d),"string"===i.typeOf(b)&&(a._uri=i.formatURI(b)));c&&(b=a.resolveURI(c),a.setReference("full",b));c=a.getAttribute("extends");i.isJSONSchema(c)&&(c=i.inherits(c,a,!0),a=a._env.createSchema(c,a._schema,a._uri));return a}});Ua=i.inherits(ta,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/hyper-schema#",properties:{links:{selfReferenceVariable:"@"},
root:{deprecated:!0},contentEncoding:{deprecated:!1},alternate:{deprecated:!0}}});Va=i.inherits(ua,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/links#",properties:{href:{required:!0,format:"link-description-object-template"},rel:{required:!0},properties:{deprecated:!0},schema:{$ref:"http://json-schema.org/draft-03/hyper-schema#"}}});l.setOption("defaultSchemaURI","http://json-schema.org/draft-03/schema#");va=l.createSchema(Ta,!0,"http://json-schema.org/draft-03/schema#");
Wa=l.createSchema(i.inherits(va,l.createSchema(Ua,!0,"http://json-schema.org/draft-03/hyper-schema#"),!0),!0,"http://json-schema.org/draft-03/hyper-schema#");l.setOption("defaultSchemaURI","http://json-schema.org/draft-03/hyper-schema#");Xa=l.createSchema(Va,!0,"http://json-schema.org/draft-03/links#");l.setOption("latestJSONSchemaSchemaURI","http://json-schema.org/draft-03/schema#");l.setOption("latestJSONSchemaHyperSchemaURI","http://json-schema.org/draft-03/hyper-schema#");l.setOption("latestJSONSchemaLinksURI",
"http://json-schema.org/draft-03/links#");l._schemas["http://json-schema.org/schema#"]=va;l._schemas["http://json-schema.org/hyper-schema#"]=Wa;l._schemas["http://json-schema.org/links#"]=Xa;i.registerEnvironment("json-schema-draft-03",l);(!i.getDefaultEnvironmentID()||"json-schema-draft-01"===i.getDefaultEnvironmentID()||"json-schema-draft-02"===i.getDefaultEnvironmentID())&&i.setDefaultEnvironmentID("json-schema-draft-03")})();
